@model Library.DataAccess.Domain.Users
@{
    ViewData["Title"] = "Crear Usuario";
    List<Library.DataAccess.Domain.Users_Roles> roles = ViewBag.Users_Roles as List<Library.DataAccess.Domain.Users_Roles>;
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<style>
    #contenedor-principal {
        border-radius: 1rem;
    }

    @@media (max-width: 768px) {
        .margenEdit {
            padding: 0 10px;
        }

        .btn-group-responsive .btn {
            width: 100%;
            margin-bottom: 10px;
        }
    }

    .form-label {
        font-weight: 500;
    }
</style>

<div class="card" id="contenedor-principal">
    <div class="card-body">
        <h4 class="card-title text-center" style="font-family: 'Poppins', sans-serif; font-weight: 600;">
            Crear Nuevo Usuario
        </h4>
        <hr />

        <form asp-action="Create" class="container">
            <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>

            <div class="row justify-content-center">
                <div class="col-md-4 mb-3">
                    <div class="form-group">
                        <label asp-for="USER_NAME" class="form-label"></label>
                        <input asp-for="USER_NAME" class="form-control" />
                        <span asp-validation-for="USER_NAME" class="text-danger"></span>
                    </div>
                </div>

                <div class="col-md-4 mb-3">
                    <div class="form-group">
                        <label asp-for="PASSWORD_HASH" class="form-label"></label>
                        <input type="password" asp-for="PASSWORD_HASH" class="form-control" />
                        <span asp-validation-for="PASSWORD_HASH" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="row justify-content-center">
                <div class="col-md-4 mb-3">
                    <div class="form-group">
                        <label asp-for="ConfirmPassword" class="form-label"></label>
                        <input type="password" asp-for="ConfirmPassword" class="form-control" />
                        <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                    </div>
                </div>
            </div>

            @* Si más adelante quieres incluir la asignación de roles, aquí podrías poner un select *@
            @* 
            <div class="row justify-content-center">
                <div class="col-md-4 mb-3">
                    <div class="form-group">
                        <label for="RoleId" class="form-label">Rol</label>
                        <select asp-for="RoleId" class="form-select" asp-items="@(new SelectList(roles, "Id", "RoleName"))">
                            <option value="">Seleccione un rol</option>
                        </select>
                        <span asp-validation-for="RoleId" class="text-danger"></span>
                    </div>
                </div>
            </div>
            *@

            <div class="d-flex justify-content-center mt-4 btn-group-responsive">
                <button type="submit" class="btn btn-success me-2">
                    <i class="bi bi-floppy"></i> Guardar
                </button>
                <a asp-action="Index" class="btn btn-secondary">
                    <i class="bi bi-reply-fill"></i> Regresar
                </a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.querySelector('.main-content')?.classList.remove('with-menu');
        document.querySelector('.main-content')?.classList.add('full-width');

        // Mostrar error si existe
        @if (!string.IsNullOrEmpty(ViewBag.Error as string))
        {
                <text>
                    Swal.fire({
                        icon: 'error',
                        title: 'Error',
                        text: 'Error, El nombre de Usuario ya existe',
                        confirmButtonText: 'Aceptar'
                    });
                </text>
        }
    </script>
}